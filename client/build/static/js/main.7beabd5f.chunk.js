(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,a){},171:function(e,t){},174:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(17),l=a.n(s),o=(a(96),a(97),a(98),a(100),a(101),a(3)),c=a.n(o),i=a(6),m=a(12),u=a(13),d=a(15),p=a(14),h=a(10),b=r.a.createContext("true"),g={userAuth:localStorage.getItem("key")},v=a(83),f=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"main-page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-xl-6"},r.a.createElement("div",{className:"content"},r.a.createElement("h5",null,"A Post Website With Node Js"),r.a.createElement("h6",null,"Keep Looking for more of our projects"))),r.a.createElement("div",{className:"col-12 col-md-6 col-xl-6"},r.a.createElement("img",{src:"/static/images/kissing.png",alt:""})))),r.a.createElement("div",{className:"section-2"},r.a.createElement("div",{className:"box-content"},r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-futbol"})),r.a.createElement("h4",null,"Sport News"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi lacinia est mi, id blandit velit pulvinar eget. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Praesent eget urna lorem. Etiam iaculis volutpat tempor. Suspendisse bibendum auctor libero, nec porta tellus. Fusce maximus dui ac molestie sodales. Sed maximus dui id sodales porta. Nullam sit amet faucibus purus. Vestibulum purus leo, mattis vel risus vel,")),r.a.createElement("div",{className:"box-content"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-newspaper"})),r.a.createElement("h4",null,"Crime News"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi lacinia est mi, id blandit velit pulvinar eget. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Praesent eget urna lorem. Etiam iaculis volutpat tempor. Suspendisse bibendum auctor libero, nec porta tellus. Fusce maximus dui ac molestie sodales. Sed maximus dui id sodales porta. Nullam sit amet faucibus purus. Vestibulum purus leo, mattis vel risus vel,")),r.a.createElement("div",{className:"box-content"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-bell"})),r.a.createElement("h4",null,"Notifications"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi lacinia est mi, id blandit velit pulvinar eget. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Praesent eget urna lorem. Etiam iaculis volutpat tempor. Suspendisse bibendum auctor libero, nec porta tellus. Fusce maximus dui ac molestie sodales. Sed maximus dui id sodales porta. Nullam sit amet faucibus purus. Vestibulum purus leo, mattis vel risus vel,"))))},E=a(19),w=a(36),N=function(e){var t=e.className,a=e.prepend_class,s=e.type,l=e.text,o=e.id,c=e.label,i=e.name,m=e.children,u=e.placeholder,d=e.prepend,p=e.label_class,h=e.value,b=Object(w.a)(e,["className","prepend_class","type","text","id","label","name","children","placeholder","prepend","label_class","value"]);return d?(m=r.a.createElement("i",{className:a},l),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},m)),r.a.createElement("input",Object.assign({},b,{className:t,type:s,value:h,placeholder:u,name:i})))):r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:p,htmlFor:o},c),r.a.createElement("input",Object.assign({},b,{className:t,type:s,value:h,placeholder:u,name:i})))},y=function(e){var t=e.className,a=e.color,n=e.text,s=Object(w.a)(e,["className","color","text"]);return r.a.createElement("button",Object.assign({className:t,color:a},s),n)},C=a(21),x=a(4),k=(a(126),a(5)),S="/users/",_="auth/login/",O="/posts/",j="/category/",P="/posts/my_post",M="http://localhost:5000/uploads/",T="http://localhost:5000/users/change/password/",D="http://localhost:5000/reset/password/",L=a(7),F=a.n(L),A=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).openRegister=function(){n.setState({register:!0,login:!1})},n.openLogin=function(){n.setState({register:!1,login:!0})},n.handleRegisterChange=function(e){var t=Object(E.a)({},n.state.account_details);t[e.target.name]=e.target.value,n.setState({account_details:t})},n.handleLoginChange=function(e){var t=Object(E.a)({},n.state.login_details);t[e.target.name]=e.target.value,n.setState({login_details:t})},n.handleLoginSubmit=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=n.state.login_details,r=n.context.refreshToken,s={email:a.email,password:a.password},n.setState({loading:!0}),e.prev=5,e.next=8,F.a.post(_,s);case 8:l=e.sent,localStorage.setItem("key",l.data.token),setTimeout((function(){r(),window.location.href="/",n.setState({loading:!1})}),3e3),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),n.setState({loading:!1}),console.log(e.t0.response.data),x.e.error(e.t0.response.data.message,{transition:x.a,autoClose:!1,position:"top-center"});case 18:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),n.handleSubmitRegister=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({loading:!0}),a=n.state.account_details,r={email:a.email_1,username:a.username,password:a.password1,password2:a.password2},e.prev=4,e.next=7,F.a.post(S,r);case 7:s=e.sent,localStorage.setItem("key",s.data.token),x.e.success("Your registration successful",{transition:x.b,position:"top-center",autoClose:!1}),setTimeout((function(){window.location.href="/",n.setState({loading:!1})}),2500),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(4),n.setState({loading:!1}),console.log(e.t0.response.data),x.e.error(e.t0.response.data.message,{transition:x.b,delay:"50000",autoClose:!1});case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),n.state={login:!0,register:!1,loading:!1,login_details:{email:"",password:""},account_details:{email_1:"",username:"",password1:"",password2:""}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.login,a=e.register,s=e.login_details,l=e.account_details,o=e.loading;return r.a.createElement(n.Fragment,null,r.a.createElement(x.d,{position:"top-center"}),o&&r.a.createElement("div",{className:"spinner"}),r.a.createElement("div",{className:"col-12 col-xl-6 offset-xl-3 mt-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(k.b,{onClick:this.openLogin,className:t?"nav-link link_tab active":"nav-link link_tab",to:"#!"},"Login")),r.a.createElement("li",null,r.a.createElement(k.b,{onClick:this.openRegister,className:a?"nav-link link_tab active":"nav-link link_tab",to:"#!"},"Register")))),r.a.createElement("div",{className:"card-body"},t&&r.a.createElement("div",{className:"loginBox col-12 col-xl-6 offset-xl-2"},r.a.createElement(C.b,{type:"fadeInRight",reveal:!0},r.a.createElement("form",{onSubmit:this.handleLoginSubmit,className:"form-group"},r.a.createElement(N,{text:"@",prepend:!0,id:"email",label:"Email",value:s.email,name:"email",placeholder:"Email",className:"form-control",type:"text",onChange:this.handleLoginChange}),r.a.createElement(N,{prepend:!0,prepend_class:"fas fa-key",name:"password",value:s.password,placeholder:"Password",className:"form-control",type:"password",onChange:this.handleLoginChange}),r.a.createElement(y,{text:"Login",className:"btn btn-primary btn-block"}),r.a.createElement("div",{className:"text-center mt-1"},r.a.createElement(k.b,{to:"/reset/password"},"forgot password?"))))),a&&r.a.createElement("div",{className:"RegisterBox"},r.a.createElement(C.b,{type:"fadeIn",reveal:!1},r.a.createElement("form",{onSubmit:this.handleSubmitRegister,className:"form-group"},r.a.createElement(N,{label:"Email",value:l.email_1,id:"email",name:"email_1",placeholder:"Email",className:"form-control mb-1",type:"text",onChange:this.handleRegisterChange}),r.a.createElement(N,{label:"Username",id:"username",name:"username",value:l.username,placeholder:"Username...",className:"form-control mb-1",type:"text",onChange:this.handleRegisterChange}),r.a.createElement(N,{label:"Password",id:"password",value:l.password1,name:"password1",placeholder:"Password",className:"form-control mb-1",type:"password",onChange:this.handleRegisterChange}),r.a.createElement(N,{label:"Confirm Password",id:"password",name:"password2",value:l.password2,placeholder:"Confirm Password",className:"form-control mb-1",type:"password",onChange:this.handleRegisterChange}),r.a.createElement(y,{text:"Create Account",className:"btn btn-success btn-block"}),r.a.createElement("div",{className:"text-center mb-2"},r.a.createElement("p",null,"already a member?"," ",r.a.createElement(k.b,{onClick:this.openLogin,to:"#"},"login"))))))))))}}]),a}(n.Component);A.contextType=b;var R=A,I=function(){var e=r.a.useContext(b),t=e.user,a=e.handleSearchChange,s=e.search,l=e.filterPosts,o=e.clearSearch;return r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(k.b,{onClick:function(){return window.location.href="/"},className:"navbar-brand",to:"#"},"PostWebsite"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{"data-toggle":"collapse","data-target":"#navbarSupportedContent",className:"nav-item active"},r.a.createElement(k.b,{className:"nav-link",to:"/news"},"Home ",r.a.createElement("span",{className:"sr-only"},"(current)"))),!t&&r.a.createElement("li",{"data-toggle":"collapse","data-target":"#navbarSupportedContent",className:"nav-item"},r.a.createElement(k.b,{onClick:function(){document.querySelector(".navbar-collapse").classList.toggle("collapse")},className:"nav-link",to:"/login"},"Login")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item disabled"},r.a.createElement(k.b,{className:"nav-link",to:"#"},"Welcome ",r.a.createElement("b",null,t.username))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(k.b,{className:"nav-link",to:"/logout"},"Logout")),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement(k.b,{className:"nav-link dropdown-toggle",to:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"News"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},r.a.createElement(k.b,{className:"dropdown-item",to:"#"},"Sports"),r.a.createElement(k.b,{className:"dropdown-item",to:"#"},"Crime"),r.a.createElement(k.b,{className:"dropdown-item",to:"#"},"Romance"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement(k.b,{className:"nav-link dropdown-toggle",to:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Profile"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},r.a.createElement(k.b,{className:"dropdown-item",to:"/change/password"},"Change Password"),r.a.createElement(k.b,{className:"dropdown-item",to:"#"},"Another action"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(k.b,{className:"dropdown-item",to:"#"},"Something else here"))))),r.a.createElement("div",{className:"navbar-nav ml-auto search-box"},r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",value:s,onChange:a,placeholder:"Search for posts","aria-label":"Search"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Search")),""!==s&&l.length>0&&r.a.createElement("div",{className:"search-result"},l.map((function(e){return r.a.createElement("div",{"data-toggle":"collapse","data-target":"#navbarSupportedContent",className:"search-post",key:e._id},r.a.createElement("h6",null,r.a.createElement(k.b,{onClick:o,to:"/post/".concat(e._id)},e.title)),r.a.createElement("h3",null,e.category.name))})))))))},Y=function(){return localStorage.removeItem("key"),window.location.href="/",r.a.createElement("div",null,r.a.createElement("h5",null,"Logging out"))},W=function(e){var t=e.showModal,a=e.category,s=e.handleChange,l=e.handleModal,o=e.handleSubmit,c=e.loading;return r.a.createElement(n.Fragment,null,t&&r.a.createElement(C.d,null,r.a.createElement(C.g,{isOpen:t,toggle:l},r.a.createElement(C.j,{toggle:l},"Add Category"),r.a.createElement(C.h,null,c&&r.a.createElement("div",{className:"spinner"}),r.a.createElement("form",{onSubmit:o},r.a.createElement(N,{className:"form-control",placeholder:"Add Category...",value:a,onChange:s,label:"Category"}),r.a.createElement(y,{className:"btn btn-primary btn-sm",text:"create category"}))),r.a.createElement(C.i,null,r.a.createElement(C.c,{color:"secondary",onClick:l},"Close")))))},q=function(e){return"romance"===e.toLowerCase()?r.a.createElement("span",{className:"badge badge-primary float-right"},e):"sports"===e.toLowerCase()?r.a.createElement("span",{className:"badge badge-success float-right"},e):"politics"===e.toLowerCase()?r.a.createElement("span",{className:"badge badge-danger float-right"},e):"crime"===e.toLowerCase()?r.a.createElement("span",{className:"badge badge-warning float-right"},e):void 0},J=a(35),U=a.n(J),V=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).handleModal=function(){n.setState({showModal:!n.state.showModal})},n.handleChange=function(e){n.setState({category:e.target.value})},n.handleSubmit=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({loading:!0}),a=n.state.category,r={name:a},e.prev=4,e.next=7,F.a.post(j,r);case 7:s=e.sent,console.log(s),setTimeout((function(){n.setState({loading:!1,showModal:!1}),x.e.success("Category has been created",{transition:x.b,autoClose:!1})}),2e3),setTimeout((function(){window.location.href="/news"}),4e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),n.setState({loading:!1}),console.log(e.t0.response.data);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),n.handleMyPost=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.context.setPosts,t.preventDefault(),e.prev=2,e.next=5,F.a.get(P,{headers:{Authorization:"JWT ".concat(g.userAuth)}});case 5:r=e.sent,s=r.data,a(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),n.state={showModal:!1,category:"",loading:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.showModal,a=e.category,s=e.loading,l=this.context.posts;return console.log(l),r.a.createElement(n.Fragment,null,r.a.createElement(W,{category:a,loading:s,handleSubmit:this.handleSubmit,showModal:t,handleChange:this.handleChange,handleModal:this.handleModal}),r.a.createElement(x.d,null),g.userAuth&&r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(k.b,{className:"nav-link bord",to:"/create"},r.a.createElement("i",{className:"fas fa-plus-circle"}),"Create Post")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(k.b,{onClick:this.handleMyPost,className:"nav-link bord",to:"#"},r.a.createElement("i",{className:"fas fa-filter"}),"Filter posts created by you")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(k.b,{onClick:this.handleModal,className:"nav-link bord",to:"#"},r.a.createElement("i",{className:"fas fa-plus-square"}),"Create Category"))),r.a.createElement("div",{className:"row"},void 0!==l.post&&l.post.map((function(e){return r.a.createElement("div",{key:e._id,className:"col-12 col-md-4"},r.a.createElement(C.b,{type:"fadeInLeft"},r.a.createElement("div",{className:"card_content"},r.a.createElement("img",{src:M+e.image,alt:""}),r.a.createElement("div",{className:"card_text"},r.a.createElement("h4",null,r.a.createElement(k.b,{to:{pathname:"/post/".concat(e._id)}},e.title)),r.a.createElement("small",{className:"text-muted mb-2"},"Posted by ",e.author.username),q(e.category.name),r.a.createElement("p",null,e.body),r.a.createElement("small",{className:"text-muted float-right"},U()(e.time_stamp).format("MMMM Do YYYY, h:mm:ss a"))))))}))))}}]),a}(n.Component);V.contextType=b;var B=V,z=a(89),G=new(a.n(z).a)("1d35458c15229178bcc9",{cluster:"eu"}),H=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).handleChange=function(e){var t=Object(E.a)({},n.state.post_details);t[e.target.name]=e.target.value,n.setState({post_details:t})},n.handleImageChange=function(e){n.setState({image:e.target.files[0]}),console.log(e.target.files[0])},n.handleSelected=function(e){n.setState({selectedCategory:e.target.value}),console.log(e.target.value)},n.handleSubmit=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,s,l,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({loading:!0}),G.connection.bind("create"),a=n.state,r=a.post_details,s=a.selectedCategory,l=a.image,(o=new FormData).append("title",r.title),o.append("body",r.body),o.append("category",s),o.append("picture",l,l.name),o.append("socket_id",G.connection.socket_id),e.prev=10,e.next=13,F.a.post(O,o,{headers:{Authorization:"JWT ".concat(g.userAuth),Content_Type:"multipart/form-data"}});case 13:setTimeout((function(){n.setState({loading:!1});x.e.error("Your post has been created",{transition:x.c,autoClose:!1})}),2e3),setTimeout((function(){n.props.history.replace("/news")}),4e3),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(10),n.setState({loading:!1}),i=e.t0.response.data.message,x.e.error(i,{transition:x.c,autoClose:!1});case 22:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t){return e.apply(this,arguments)}}(),n.state={post_details:{title:"",body:""},selectedCategory:"",image:{},categories:[],loading:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.post_details,a=e.selectedCategory,s=e.loading,l=this.context.categories;return r.a.createElement(n.Fragment,null,r.a.createElement(x.d,null),s&&r.a.createElement("div",{className:"spinner"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mt-5"},r.a.createElement("h5",{className:"text-center"},"Create Post"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-group"},r.a.createElement(N,{type:"text",className:"form-control mb-2",placeholder:"Title....",name:"title",value:t.title,label:"Title",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"body"},"Post Description"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"body",name:"body",className:"form-control mb-2",placeholder:"Enter post description",value:t.body,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"category"},"Select Category"),r.a.createElement("select",{onChange:this.handleSelected,className:"custom-select mb-2",id:"inputGroupSelect01"},r.a.createElement("option",{value:""},"select category"),void 0!==l.category&&l.category.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}))),r.a.createElement("label",{htmlFor:"image"},"Post Image"),r.a.createElement("br",null),r.a.createElement(N,{id:"image",type:"file",onChange:this.handleImageChange}),r.a.createElement(y,{disabled:""===a,className:"btn btn-primary btn-block mt-3",text:"create post"})))))}}]),a}(n.Component);H.contextType=b;var K=H,$=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).handleChange=function(e){var t=Object(E.a)({},n.state.post_details);t[e.target.name]=e.target.value,n.setState({post_details:t})},n.handleSubmit=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),a=n.props.match.params.id,t.preventDefault(),r=n.state.post_details,s={title:r.title,body:r.body},e.prev=5,e.next=8,F.a.patch(O+a,s);case 8:setTimeout((function(){n.setState({loading:!1}),n.props.history.replace("/news")}),2e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log(e.t0.response.data);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),n.state={post_details:{title:"",body:""},loading:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,F.a.get(O+t);case 4:a=e.sent,n=a.data,console.log(n.post.title),this.setState({post_details:{title:n.post.title,body:n.post.body}}),console.log(this.state.post_details),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.response.data);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.post_details,a=e.loading;return r.a.createElement(n.Fragment,null,r.a.createElement(x.d,null),a&&r.a.createElement("div",{className:"spinner"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mt-5"},r.a.createElement("h5",{className:"text-center"},"Edit Post"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-group"},r.a.createElement(N,{type:"text",className:"form-control mb-2",placeholder:"Title....",name:"title",value:t.title,label:"Title",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"body"},"Post Description"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"body",name:"body",rows:5,cols:60,className:"form-control mb-2",placeholder:"Enter post description",value:t.body,onChange:this.handleChange}),r.a.createElement(y,{className:"btn btn-success btn-block mt-3",text:"Update post"})))))}}]),a}(n.Component),Q=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={post:{},category:{}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,F.a.get(O+t);case 4:a=e.sent,n=a.data,this.setState({post:n.post,category:n.post.category}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,a){e!==this.props&&this.componentDidMount()}},{key:"render",value:function(){var e=this.state,t=e.post,a=e.category,s=this.context.posts;return void 0===a.name?r.a.createElement("p",null,"loading..."):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"imgBox"},r.a.createElement("img",{src:M+t.image,alt:""})),r.a.createElement("div",{className:"col-12 col-xl-8"},r.a.createElement("div",{className:"post-detail"},r.a.createElement("div",{className:"post-title"},r.a.createElement("h4",null,t.title),r.a.createElement(k.b,{className:"btn btn-warning btn-sm",to:"/edit/".concat(t._id)},"Edit Post")),q(a.name),r.a.createElement("small",null,"Posted by ",t.author.username),r.a.createElement("small",{className:"go-right"},U()(t.time_stamp).format("MMMM Do YYYY, h:mm:ss a")),r.a.createElement("p",null,t.body))),r.a.createElement("div",{className:"col-12 col-xl-4"},r.a.createElement("div",{className:"related-posts"},r.a.createElement("h4",null,"Related Posts"),r.a.createElement("div",{className:"card text-center"},void 0!==s.post&&s.post.map((function(e){return r.a.createElement("h5",{key:e._id},e.title)})))))))}}]),a}(n.Component);Q.contextType=b;var X=Q,Z=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).handleChange=function(e){var t=Object(E.a)({},n.state.password_details);t[e.target.name]=e.target.value,n.setState({password_details:t})},n.handlePassword=function(e){var t=Object(E.a)({},n.state.errors),a=n.state.password_details.new_password,r=e.target.value;n.setState({new_password2:r}),r.trim()!==a?t.password="password does not match":delete t.password,n.setState({errors:t})},n.handleSubmit=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=n.state.password_details,e.prev=2,e.next=5,F.a.post(T,a,{headers:{Authorization:"JWT ".concat(g.userAuth)}});case 5:r=e.sent,console.log(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),x.e.warn(e.t0.response.data.message,{transition:x.a,autoClose:!1,position:"top-center"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),n.state={password_details:{old_password:"",new_password:""},new_password2:"",errors:{}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.password_details,a=e.errors;return r.a.createElement(n.Fragment,null,r.a.createElement(x.d,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"password-change"},r.a.createElement("h5",null,"Change Your Password"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(N,{label_class:"bold-text",className:"form-control mb-2",placeholder:"Old password",label:"Old Password",name:"old_password",type:"password",required:!0,onChange:this.handleChange,value:t.old_password}),r.a.createElement(N,{label_class:"bold-text",className:"form-control mb-2",placeholder:"New password",label:"New Password",name:"new_password",type:"password",required:!0,onChange:this.handleChange,value:t.new_password}),r.a.createElement(N,{label_class:"bold-text",className:"form-control mb-2",placeholder:"Confirm Password",label:"Confirm Password",name:"new_password2",type:"password",required:!0,onChange:this.handlePassword,value:t.new_password2}),a.password&&r.a.createElement("small",{style:{color:"red"}},a.password),r.a.createElement(y,{disabled:a.password,className:"btn btn-warning btn-block",text:"update password"})))))}}]),a}(n.Component),ee=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:""},e.handleChange=function(t){e.setState({email:t.target.value})},e.handleSubmit=function(){var t=Object(i.a)(c.a.mark((function t(a){var n,r,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state.email,r={email:n},t.prev=3,t.next=6,F.a.post(D,r);case 6:s=t.sent,console.log(s),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),x.e.error(t.t0.response.data.message,{transition:x.b,autoClose:!1,position:"top-center"});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.email;return r.a.createElement(n.Fragment,null,r.a.createElement(x.d,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"reset-password"},r.a.createElement("h4",null,"Reset Password"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-inline"},r.a.createElement(N,{className:"form-control",placeholder:"Email",value:e,onChange:this.handleChange}),r.a.createElement(y,{className:"btn btn-primary btn-md",text:"send"})))))}}]),a}(n.Component),te=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).handleChange=function(e){n.setState({new_password:e.target.value})},n.handleChangePassword=function(e){var t=e.target.value,a=Object(E.a)({},n.state.errors);n.setState({new_password2:t}),t.trim()!==n.state.new_password?a.password="Password does not match":delete a.password,n.setState({errors:a})},n.handleSubmit=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,s,l,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=n.props.match.params.id,r=n.props.match.params.token,s=n.state.new_password,l=D+a+"/"+r,o={new_password:s},e.prev=6,e.next=9,F.a.post(l,o);case 9:i=e.sent,x.e.success(i.data.message,{transition:x.b,autoClose:!1,position:"top-center"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),x.e.error(e.t0.response.data.message,{transition:x.b,autoClose:!1,position:"top-center"});case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),n.state={new_password:"",new_password2:"",errors:{}},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.id,a=this.props.match.params.token,n=D+t+"/"+a,e.next=6,F.a.get(n);case 6:r=e.sent,console.log(r),console.log(D+t+"/"+a),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),(s=Object(E.a)({},this.state.errors)).tokenError=e.t0.response.data.message,this.setState({errors:s});case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.new_password,a=e.new_password2,s=e.errors;return s.tokenError?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement("h5",null,"Invalid Link or Token has expired, please request for another one"),r.a.createElement(y,{onClick:function(){return window.location.href="/"},className:"btn btn-primary btn-lg",text:"Go Home"})):r.a.createElement(n.Fragment,null,r.a.createElement(x.d,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"reset-password"},r.a.createElement("h4",null,"Reset Password"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-group"},r.a.createElement(N,{type:"password",label_class:"mb-2",label:"New Password",className:"form-control",placeholder:"new password",value:t,required:!0,onChange:this.handleChange}),r.a.createElement(N,{type:"password",label_class:"mt-2 text-black",label:"Confirm password",className:"form-control mb-2",placeholder:"Confirm password",value:a,required:!0,onChange:this.handleChangePassword}),s.password&&r.a.createElement("small",{style:{color:"red"}},s.password),r.a.createElement(y,{disabled:s.password,className:"btn btn-primary btn-block",text:"reset password"})))))}}]),a}(n.Component),ae=a(90),ne=a.n(ae),re=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).getPostComponent=Object(i.a)(c.a.mark((function e(){var t,a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get(O);case 3:return t=e.sent,a=t.data,e.next=7,F.a.get(j);case 7:r=e.sent,s=r.data,n.setState({categories:s}),n.setState({posts:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.response.data);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),n.setPosts=function(e){n.setState({posts:e})},n.refreshToken=function(){if(g.userAuth){var e=Object(v.a)(g.userAuth);n.setState({user:e});var t=new Date(0).setUTCSeconds(e.exp)-new Date;setTimeout((function(){alert("Your session has expired... you will be logged out"),localStorage.clear(),window.location.href="/"}),t)}},n.handleSearchChange=function(e){n.setState({search:e.target.value})},n.clearSearch=function(){n.setState({search:""})},n.state={posts:[],categories:[],search:""},n.socket=ne()("http://localhost:5000",{transports:["polling"]}),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.refreshToken(),this.getPostComponent(),G.subscribe("create-post").bind("create",function(){var e=Object(i.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getPostComponent(),x.e.success("".concat(a.posts.author.username," just created a post with the title ").concat(a.posts.title),{transition:x.c,autoClose:!1,position:"bottom-center"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){G.unsubscribe("create-post"),G.unbind_all()}},{key:"render",value:function(){var e=this.props.location,t=this.state,a=t.user,s=t.posts,l=t.categories,o=t.search,c=this.refreshToken,i=this.setPosts,m=this.handleSearchChange,u=this.clearSearch,d=void 0!==s.post&&s.post.filter((function(e){return-1!==e.title.toLowerCase().indexOf(o.toLowerCase())}));return r.a.createElement(n.Fragment,null,r.a.createElement(x.d,null),r.a.createElement(b.Provider,{value:{user:a,refreshToken:c,posts:s,categories:l,setPosts:i,search:o,handleSearchChange:m,filterPosts:d,clearSearch:u}},r.a.createElement(I,null),r.a.createElement(h.d,{location:e},r.a.createElement(h.b,{path:"/login",component:R}),r.a.createElement(h.b,{path:"/create",render:function(e){return r.a.createElement(K,Object.assign({},e,{categories:l}))}}),r.a.createElement(h.b,{path:"/reset/password/:id/:token",component:te}),r.a.createElement(h.b,{path:"/post/:id",component:X}),r.a.createElement(h.b,{path:"/reset/password",component:ee}),r.a.createElement(h.b,{path:"/change/password",component:Z}),r.a.createElement(h.b,{path:"/edit/:id",component:$}),r.a.createElement(h.b,{path:"/logout",component:Y}),r.a.createElement(h.b,{path:"/news",component:B}),r.a.createElement(h.b,{path:"/",component:f}),r.a.createElement(h.a,{to:"/"}))))}}]),a}(n.Component);var se=function(){return r.a.createElement("div",null,r.a.createElement(re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(k.a,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,a){e.exports=a(174)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.7beabd5f.chunk.js.map